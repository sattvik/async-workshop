<!--
  ~ Copyright © 2014 Daniel Solano Gómez.
  ~
  ~ This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0
  ~ International License <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
  -->

<template>
    <section id="overview">
        <header>
            <h2>Overview</h2>
        </header>
        <p>
            Over the course of this tutorial, we will build a simple chat application step by step. In doing so, we will
            use core.async in both Clojure and ClojureScript. The steps we will be taking will be:
        </p>
        <ol>
            <li>Download the tutorial project and set up your working environment</li>
            <li>
                Once your environment is set up, we will create a minimal client that will attempt to connect to a
                server using a WebSocket. The callbacks from the socket will be managed by core.async.
            </li>
            <li>
                Next, the minimal client will get a minimal server. Again, we will use core.async to manage callbacks
                from the underlying APIs. The server will now be capable of echoing messages back to the client.
            </li>
            <li>
                We augment the client by adding the ability to send messages to the server.
            </li>
            <li>
                Finally, we add the logic to the server to turn it into a true chat server.
            </li>
        </ol>
    </section>
    <section id="get-the-code">
        <h2>Get the code</h2>

        <p>
            The source code for this workshop is available from GitHub at
            <a href="https://github.com/sattvik/async-workshop">https://github.com/sattvik/async-workshop</a>:
        </p>
        <pre class="brush: plain">$ git clone https://github.com/sattvik/async-workshop</pre>
    </section>
    <section id="about-the-code">
        <h2>About the code</h2>

        <p>
            The code is packaged as a Leiningen project. This project includes the source code for this web site,
            including the reference, tutorial instructions, and the chat demo itself. You should be able to run the
            web site itself using <code>lein run</code>, which will start listening at
            <a href="http://localhost:9000">http://localhost:9000</a>.
        </p>
        <section>
            <h3>Directory structure</h3>

            <p>
                The repository is structured as follows:
            </p>
            <ul>
                <li>
                    <code>src/clj</code> is the root for all of the Clojure code used in the application.
                </li>
                <li>
                    <code>src/chat-demo</code> is the root for all of the ClojureScript code used in the application.
                </li>
                <li>
                    <code>devel/clj</code> contains code primarily for use during development. This includes browser
                    REPL support via Austin, namespace reloading, etc.
                </li>
                <li>
                    <code>resources</code> contains various resources used by web application, such as HTML templates,
                    JavaScript, etc. We won't need to touch any of this as part of the tutorial.
                </li>
            </ul>
        </section>
        <section>
            <h3>Code structure</h3>

            <p>
                The code itself is structured into the following namespaces:
            </p>
            <ul>
                <li>
                    All of the code related to the chat demo and tutorial is under the
                    <code>async-workshop.chat-demo</code> namespace. The client (ClojureScript) code will be under
                    <code>async-workshop.chat-demo.client</code>, and the server (Clojure) code will be under
                    <code>async-workshop.chat-demo.server</code>.
                </li>
                <li>
                    <code>async-workshop.server</code> is the main namespace for most of the web app not related to the
                    chat demo/tutorial. You will not need to worry about this code.
                </li>
            </ul>
        </section>
    </section>
    <section id="develop-the-code">
        <h2>Develop the code</h2>

        <p>
            To get started with the tutorial, just run <code>lein repl</code>. This will accomplish a number of handy
            tasks for you:
        </p>

        <ol>
            <li>
                It will create an Austin-based browser REPL environment that will be injected into the served chat demo
                page. You can access this environment by using <code>@user/repl-env</code>. For example, you can convert
                your Leiningen REPL to a ClojureScript browser REPL by invoking <code>(cemerick.austin.repls/cljs-repl
                @user/repl-env)</code>. Note that browser REPL will hang until you log into the chat demo.
            </li>
            <li>
                The ClojureScript code will be compiled as part of the startup process. You may also want to run
                <code>lein cljsbuild auto chat-demo</code> in a separate terminal window as you work on the
                ClojureScript portions of the tutorial. If you do so, you can just reload the chat demo page and not
                worry about running a browser REPL.
            </li>
            <li>
                It will launch the server so that you can browse to it on <a href="http://localhost:9000">http://localhost:9000</a>.
                If you need to, you can later stop and start the server using <code>(user/stop)</code> and <code>(user/start)</code>.
            </li>
        </ol>
    </section>
    <section>
        <p>Ready to get started?</p>
        <a href="/tutorial/a-minimal-client">
            <paper-button label="Build a minimal client" class="inverse" raisedbutton></paper-button>
        </a>
    </section>
</template>